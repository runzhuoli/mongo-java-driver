<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/mongo-java-driver/3.1/img/favicon.png">

    <title>CRUD Operations</title>

    <link rel="stylesheet" href="/mongo-java-driver/3.1/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver/3.1/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="/mongo-java-driver/3.1/../">
        <img src="/mongo-java-driver/3.1/img/logo-mongodb-header.png", alt="MongoDB.org" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="https://university.mongodb.com" data-toggle="tooltip" data-placement="bottom" title="Free Online Classes">MongoDB University</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/mongo-java-driver/3.1">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/mongo-java-driver/3.1/../">MongoDB Java Driver</a>
          <a class="version pull-right" href="/mongo-java-driver/3.1">3.1</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
      
      
        
      
    
    
  
  


        
      
    
      
      
        
      
    
      
      
    
    
  


        
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-java-driver/3.1/whats-new/" class="">
      <i class='fa fa-cog'></i>
      <span>What&#39;s New</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/whats-new/upgrading/">
        <i class='fa fa-wrench'></i>
        Upgrading to 3.1
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-java-driver/3.1/driver/" class="">
      <i class='fa fa-arrows-h'></i>
      <span>MongoDB Driver</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-java-driver/3.1/driver/getting-started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver/getting-started/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver/getting-started/quick-tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver/getting-started/quick-tour-admin/">
        <i class='fa'></i>
        Admin Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-java-driver/3.1/driver/reference/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      
  </a>
    <ul >
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-java-driver/3.1/driver/reference/connecting/" class="">
      <i class='fa'></i>
      <span>Connecting</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver/reference/connecting/connection-settings/">
        <i class='fa'></i>
        Connection Settings
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver/reference/connecting/ssl/">
        <i class='fa'></i>
        SSL
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver/reference/connecting/authenticating/">
        <i class='fa'></i>
        Authenticating
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver/reference/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver/reference/gridfs/">
        <i class='fa'></i>
        GridFS
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-java-driver/3.1/driver/reference/management/" class="">
      <i class='fa'></i>
      <span>Management</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver/reference/management/logging/">
        <i class='fa'></i>
        Logging
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver/reference/management/monitoring/">
        <i class='fa'></i>
        Monitoring
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/mongo-java-driver/3.1/driver-async/" class="">
      <i class='fa fa-refresh'></i>
      <span>MongoDB Async Driver</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-java-driver/3.1/driver-async/getting-started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver-async/getting-started/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver-async/getting-started/quick-tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver-async/getting-started/quick-tour-admin/">
        <i class='fa'></i>
        Admin Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        













  




<li class="toctree-l2  current">
  <a href="/mongo-java-driver/3.1/driver-async/reference/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      
  </a>
    <ul  class="current">
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-java-driver/3.1/driver-async/reference/connecting/" class="">
      <i class='fa'></i>
      <span>Connecting</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver-async/reference/connecting/connection-settings/">
        <i class='fa'></i>
        Connection Settings
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver-async/reference/connecting/ssl/">
        <i class='fa'></i>
        SSL
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver-async/reference/connecting/authenticating/">
        <i class='fa'></i>
        Authenticating
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        













  




    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver-async/reference/crud/">
        <i class='fa'></i>
        CRUD Operations
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-java-driver/3.1/driver-async/reference/management/" class="">
      <i class='fa'></i>
      <span>Management</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver-async/reference/management/logging/">
        <i class='fa'></i>
        Logging
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-java-driver/3.1/driver-async/reference/management/monitoring/">
        <i class='fa'></i>
        Monitoring
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-java-driver/3.1/driver-async/reference/observables/">
        <i class='fa'></i>
        Observables
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-java-driver/3.1/bson/" class="">
      <i class='fa fa-th'></i>
      <span>BSON</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/bson/documents/">
        <i class='fa'></i>
        Documents
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/bson/readers-and-writers/">
        <i class='fa'></i>
        Readers and Writers
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/bson/codecs/">
        <i class='fa'></i>
        Codec and CodecRegistry
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/bson/extended-json/">
        <i class='fa'></i>
        Extended JSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/bson/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-java-driver/3.1/builders/" class="">
      <i class='fa fa-wrench'></i>
      <span>Builders</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/filters/">
        <i class='fa'></i>
        Filters
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/projections/">
        <i class='fa'></i>
        Projections
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/sorts/">
        <i class='fa'></i>
        Sort Criteria  
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/aggregation/">
        <i class='fa'></i>
        Aggregation
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/updates/">
        <i class='fa'></i>
        Updates
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver/3.1/builders/indexes/">
        <i class='fa'></i>
        Indexes
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="http://api.mongodb.org/java/3.1">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-java-driver/tree/master">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-java-driver/3.1/issues-help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/mongo-java-driver/blob/master/docs/reference/content/driver-async/reference/crud/index.md" target="_blank" title="Edit driver-async/reference/crud/index.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  <li><a href="/mongo-java-driver/3.1/driver-async/">MongoDB Async Driver</a> <i class="fa fa-angle-right"></i></li>
  <li><a href="/mongo-java-driver/3.1/driver-async/reference/">Reference</a> <i class="fa fa-angle-right"></i></li>
  <li>CRUD Operations</li>
</ul>
</div>




<h2 id="crud">CRUD</h2>

<p>For a walkthrough of the main CRUD operations please refer to the <a href="/mongo-java-driver/3.1/driver-async/getting-started/quick-tour/">Quick Tour</a>.</p>

<p>All CRUD-related methods in the Java driver are accessed through the
<a href="http://api.mongodb.org/java/3.1/?com/mongodb/async/client/MongoCollection.html
"><code>MongoCollection</code></a> interface.  Instances of
<a href="http://api.mongodb.org/java/3.1/?com/mongodb/async/client/MongoCollection.html
"><code>MongoCollection</code></a> can be obtained from a<br />
<a href="http://api.mongodb.org/java/3.1/?com/mongodb/async/client/MongoClient.html
"><code>MongoClient</code></a> instance by way of a
<a href="http://api.mongodb.org/java/3.1/?com/mongodb/async/client/MongoDatabase.html
"><code>MongoDatabase</code></a>:</p>

<pre><code class="language-java">MongoClient client = MongoClients.create();
MongoDatabase database = client.getDatabase(&quot;mydb&quot;);
MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;mycoll&quot;);
</code></pre>

<p><a href="http://api.mongodb.org/java/3.1/?com/mongodb/async/client/MongoCollection.html
"><code>MongoCollection</code></a> is a generic interface: the <code>TDocument</code> type parameter
is the class that clients use to insert or replace documents in a collection, and the default type returned from <code>find</code> and <code>aggregate</code>.</p>

<p>The single-argument <code>getCollection</code> method returns an instance of <code>MongoCollection&lt;Document&gt;</code>, and so with this type of collection
an application uses instances of the <code>Document</code> class:</p>

<pre><code class="language-java">MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;mycoll&quot;);

// insert a document
Document document = new Document(&quot;x&quot;, 1)
collection.insertOne(document, new SingleResultCallback&lt;Void&gt;() {
   @Override
   public void onResult(final Void result, final Throwable t) {
       System.out.println(&quot;Inserted!&quot;);
   }
});

...

document.append(&quot;x&quot;, 2).append(&quot;y&quot;, 3);

// replace a document
collection.replaceOne(Filters.eq(&quot;_id&quot;, document.get(&quot;_id&quot;), document, 
    new SingleResultCallback&lt;UpdateResult&gt;() {
       @Override
       public void onResult(final UpdateResult result, final Throwable t) {
           System.out.println(result.getModifiedCount());
       }
   });

...

// find documents
collection.find().into(new ArrayList&lt;Document&gt;(), 
    new SingleResultCallback&lt;List&lt;Document&gt;&gt;() {
        @Override
        public void onResult(final List&lt;Document&gt; result, final Throwable t) {
            System.out.println(&quot;Found Documents: #&quot; + result.size());
        }
    });
</code></pre>

<h3 id="codecregistry">CodecRegistry</h3>

<p>An overload of the <code>getCollection</code> method allows clients to specify a different class for representing BSON documents.  For example,
users my wish to use the type-safe <a href="http://api.mongodb.org/java/3.1/?org/bson/BsonDocument.html
"><code>BsonDocument</code></a> with the CRUD API:</p>

<pre><code class="language-java">// Pass BsonDocument.class as the second argument
MongoCollection&lt;BsonDocument&gt; collection = database.getCollection(&quot;mycoll&quot;, BsonDocument.class);

// insert a document
BsonDocument document = new BsonDocument(&quot;x&quot;, new BsonInt32(1));
collection.insertOne(document, new SingleResultCallback&lt;Void&gt;() {
   @Override
   public void onResult(final Void result, final Throwable t) {
       System.out.println(&quot;Inserted!&quot;);
   }
});

...

document.append(&quot;x&quot;, new BsonInt32(2)).append(&quot;y&quot;, new BsonInt32(3));

// replace a document
collection.replaceOne(Filters.eq(&quot;_id&quot;, document.get(&quot;_id&quot;), document, 
    new SingleResultCallback&lt;UpdateResult&gt;() {
       @Override
       public void onResult(final UpdateResult result, final Throwable t) {
           System.out.println(result.getModifiedCount());
       }
   });

...

// find documents
collection.find().into(new ArrayList&lt;BsonDocument&gt;(), 
    new SingleResultCallback&lt;List&lt;BsonDocument&gt;&gt;() {
        @Override
        public void onResult(final List&lt;BsonDocument&gt; result, final Throwable t) {
            System.out.println(&quot;Found BsonDocuments: #&quot; + result.size());
        }
    });
</code></pre>

<p>There are two requirements that must be met for any class used in this way:</p>

<ul>
<li>a <code>Codec</code> for it must be registered in the <code>MongoCollection</code>&rsquo;s <code>CodecRegistry</code></li>
<li>the <code>Codec</code> must be one that encodes and decodes a full BSON document (and not just, for example, a single BSON value like an Int32)</li>
</ul>

<p>By default, a <code>MongoCollection</code> is configured with <code>Codec</code>s for two classes:</p>

<ul>
<li><code>Document</code></li>
<li><code>BsonDocument</code></li>
</ul>

<p>Applications, however, are free to register <code>Codec</code> implementations for other classes by customizing the <code>CodecRegistry</code>.  New
<code>CodecRegistry</code> instances are configurable at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withCodecRegistry</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withCodecRegistry</code> method</li>
</ul>

<p>Consider the case of encoding and decoding instances of the <code>UUID</code> class.  The Java driver by default encodes instances of <code>UUID</code> using a
byte ordering that is not compatible with other MongoDB drivers, and changing the default would be quite dangerous.  But it is
possible for new applications that require interoperability across multiple drivers to be able to change that default, and they can do
that with a <code>CodecRegistry</code>.</p>

<pre><code class="language-java">// Replaces the default UuidCodec with one that uses the new standard UUID representation
CodecRegistry codecRegistry = 
CodecRegistries.fromRegistries(CodecRegistries.fromCodecs(new UuidCodec(UuidRepresentation.STANDARD)),
                               MongoClient.getDefaultCodecRegistry());

// globally
MongoClientSettings clientSettings = MongoClients.create(&quot;mongodb://localhost&quot;).ggetSettings();
newClientSettings = MongoClientSettings.builder(clientSettings).codecRegistry(codecRegistry).build();
MongoClient client = MongoClients.create(newClientSettings);
 

// or per database
MongoDatabase database = client.getDatabase(&quot;mydb&quot;)
                               .withCodecRegistry(codecRegistry);

// or per collection
MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;mycoll&quot;)
                                               .withCodecRegistry(codecRegistry);
</code></pre>

<h3 id="write-concern">Write Concern</h3>

<p>Applications can configure the <code>WriteConcern</code> that a <code>MongoCollection</code> uses for write operations.  Like <code>CodecRegistry</code>, the
<code>WriteConcern</code> can be configured at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withWriteConcern</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withWriteConcern</code> method</li>
</ul>

<h3 id="read-preference">Read Preference</h3>

<p>Applications can configure the <code>ReadPreference</code> that a <code>MongoCollection</code> uses for read operations.  Like <code>WriteConcern</code>, the
<code>ReadPreference</code> can be configured at three levels:</p>

<ul>
<li>In a <code>MongoClient</code> via <code>MongoClientOptions</code></li>
<li>In a <code>MongoDatabase</code> via its <code>withReadPreference</code> method</li>
<li>In a <code>MongoCollection</code> via its <code>withReadPreference</code> method</li>
</ul>

<h3 id="immutability-of-mongodatabase-and-mongocollection">Immutability of MongoDatabase and MongoCollection</h3>

<p>Instance of <code>MongoDatabase</code> and <code>MongoCollection</code> are immutable, so rather than mutate the state of the <code>MongoCollection</code> on which they
are invoked, the three methods discussed above return new instances.  Applications should therefore be sure to store the result of the
method call.  For example:</p>

<pre><code class="language-java">// CORRECT: The results of the method calls are chained and the final one is referenced 
// by collection 
MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;mycoll&quot;)
                                                .withWriteConcern(WriteConcern.JOURNALED)
                                                .withReadPreference(ReadPreference.primary())
                                                .withCodecRegistry(newRegistry);

// INCORRECT: withReadPreference returns a new instance of MongoCollection
// It does not modify the collection it's called on.  So this will
// have no effect
collection.withReadPreference(ReadPreference.secondary());
</code></pre>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/mongo-java-driver/3.1/driver-async/reference/connecting/">
      <i class="fa fa-long-arrow-left"> </i> Connecting
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/mongo-java-driver/3.1/driver-async/reference/management/">
    Management <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#crud">CRUD</a>
<ul>
<li><a href="#codecregistry">CodecRegistry</a></li>
<li><a href="#write-concern">Write Concern</a></li>
<li><a href="#read-preference">Read Preference</a></li>
<li><a href="#immutability-of-mongodatabase-and-mongocollection">Immutability of MongoDatabase and MongoCollection</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/mongo-java-driver/3.1",
   VERSION:     "3.1",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/mongo-java-driver/3.1/js/jquery.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/lib/bootstrap.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/js/navbar.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/js/scripts.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/mongo-java-driver/3.1/js/java.js"></script>



<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

